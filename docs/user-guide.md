# Square - ユーザーガイド

## 🎮 ゲーム概要

**Square（スクエア）** は、色付きブロックを落として2×2の正方形（スクエア）を作る落ちものパズルゲームです。

同じ色のブロックで2×2の正方形を作ると、そのブロックが消えてスコアが加算されます。複数の正方形を同時に作ると連鎖ボーナスが得られます！

---

## 🎯 ゲームの目的

- 同じ色のブロックで2×2の正方形を作ってスコアを稼ぐ
- できるだけ長くゲームを続ける
- 連鎖を狙って高得点を目指す

---

## 🕹️ 操作方法

### キーボード操作

| キー | 動作 |
|------|------|
| `←` (左矢印) | ブロックを左に移動 |
| `→` (右矢印) | ブロックを右に移動 |
| `↓` (下矢印) | ブロックを素早く落下 |
| `スペース` | ブロックを即座に接地 |
| `Z` または `↑` (上矢印) | ブロックを反時計回りに回転 |
| `X` または `Shift` | ブロックを時計回りに回転 |

### ボタン操作

- **一時停止/再開ボタン**: ゲームを一時停止/再開
- **リセットボタン**: ゲームを最初からやり直す
- **ランキングボタン**: 過去の最高スコアランキングを表示

---

## 📖 ルール説明

### 基本ルール

1. **ブロックの落下**
   - 画面上部から2×2サイズのカラーブロックが落ちてきます
   - ブロックは4つの色（赤、青、緑、黄）の組み合わせでできています
   - ブロックは自動的に落下しますが、操作で位置や回転を変えられます

2. **ブロックの配置**
   - フィールドは幅8マス × 高さ12マスの盤面です
   - ブロックを左右に移動させて配置位置を決めます
   - 回転させて向きを変えられます
   - 接地したブロックはフィールドに固定されます

3. **消去判定**
   - 同じ色のブロックで2×2の正方形ができると消去されます
   - 消去されたブロックの上にあるブロックは落下します
   - 落下後に新たな正方形ができると連鎖します

4. **連鎖**
   - ブロックが消えて落下した結果、新たに2×2の正方形ができると連鎖が発生
   - 連鎖すると追加ボーナスが得られます
   - 連鎖は自動的に続きます

5. **ゲームオーバー**
   - 新しいブロックが出現する位置（最上段）に既にブロックがあると、ゲームオーバーになります
   - リスタートボタンでもう一度プレイできます

---

## 💯 スコアリング

### 基本スコア

- **2×2正方形1つ消去**: 100点

### 連鎖ボーナス

連鎖が発生すると、追加でボーナススコアが加算されます：

- **1連鎖**: +50点
- **2連鎖**: +100点（合計+150点）
- **3連鎖**: +150点（合計+300点）
- **4連鎖以降**: さらに追加

連鎖ボーナスは累積されるため、長い連鎖を狙うほど高得点が得られます！

---

## 🏆 ランキング機能

### ランキングの記録

- ゲームオーバー時に、スコアが自動的にランキングに保存されます
- 上位10件のスコアがローカルストレージに保存されます
- ランキングはブラウザごとに保存されるため、デバイスや環境を変えるとリセットされます

### ランキングの表示

1. **ランキングボタンをクリック**
   - 画面右側の「ランキング」ボタンをクリックすると、ランキングダイアログが表示されます

2. **ランキング内容**
   - 順位（1位〜10位）
   - スコア
   - 達成日時

3. **ダイアログを閉じる**
   - 「閉じる」ボタンをクリックするか、ダイアログの外側をクリックすると閉じます

### ランキングのリセット

ランキングをリセットしたい場合は、ブラウザのローカルストレージをクリアしてください。

---

## 🎨 ブロックの色

ゲームには4色のブロックが登場します：

- 🔴 **赤 (Red)**
- 🔵 **青 (Blue)**
- 🟢 **緑 (Green)**
- 🟡 **黄 (Yellow)**

各ブロックは2×2サイズで、4つのマスがそれぞれ異なる色を持つ場合があります。

---

## 💡 攻略のヒント

### 初心者向け

1. **基本操作に慣れる**
   - まずは左右移動と回転を使いこなせるようになりましょう
   - スペースキーでの即座接地は慎重に使いましょう

2. **色を揃える**
   - 同じ色のブロックをできるだけ近くに配置しましょう
   - 2×2の正方形を意識して配置位置を決めましょう

3. **平らに積む**
   - 盤面をできるだけ平らに保ちましょう
   - 凸凹が激しくなるとゲームオーバーになりやすくなります

### 中級者向け

1. **連鎖を狙う**
   - 消去後の落下を予測して配置しましょう
   - 複数の正方形を仕込んで連鎖を狙いましょう

2. **次のブロックを確認**
   - 画面右側に表示される「Next」ブロックを確認しましょう
   - 次のブロックを考慮して現在のブロックを配置しましょう

3. **上部に余裕を持たせる**
   - 盤面の上部に余裕を持たせると、落ち着いて操作できます
   - 危険な状況になる前に整理しましょう

### 上級者向け

1. **複数連鎖を組み立てる**
   - 3連鎖、4連鎖を狙える配置を作りましょう
   - 複数の色で同時に連鎖の準備をしましょう

2. **効率的な消去**
   - 複数の正方形を同時に消せる配置を探しましょう
   - 消去のタイミングをコントロールしましょう

3. **リカバリー技術**
   - 危険な状況でもあきらめずに整理の方法を探しましょう
   - 部分的な消去で時間を稼ぎましょう

---

## ❓ よくある質問

### Q: ブロックの回転方向を変えるには？

A: Zキーで反時計回り、Xキーまたはシフトキーで時計回りに回転します。上矢印キーも反時計回りの回転に使えます。

### Q: ブロックを素早く落とすには？

A: 下矢印キーを押し続けると通常より速く落下します。スペースキーを押すと即座に接地します。

### Q: ゲームを一時停止するには？

A: 画面右側の「一時停止」ボタンをクリックするか、ゲーム画面の外をクリックすると一時停止できます。同じボタンで再開できます。

### Q: スコアはどのように計算されますか？

A: 2×2の正方形1つにつき100点です。連鎖すると追加ボーナスが加算されます（1連鎖+50点、2連鎖+100点、3連鎖+150点...）。

### Q: ゲームオーバーになる条件は？

A: 新しいブロックが出現する位置（最上段の中央）に既にブロックがある場合、ゲームオーバーになります。

### Q: 連鎖を狙うコツは？

A: ブロックを消した後の落下を予測することが重要です。消去後に新たな2×2の正方形ができるように配置しましょう。

### Q: ランキングはどこに保存されますか？

A: ランキングはブラウザのローカルストレージに保存されます。そのため、同じブラウザであればページを閉じても記録は保持されますが、別のブラウザやデバイスでは共有されません。

### Q: ランキングは何件まで保存されますか？

A: 上位10件のスコアが保存されます。11位以下のスコアは自動的に削除されます。

### Q: ランキングをリセットできますか？

A: ブラウザのローカルストレージをクリアすることでランキングをリセットできます。ブラウザの設定から「閲覧データの削除」を選択し、「Cookieとサイトデータ」を削除してください。

---

## 🎓 さらに上達するために

1. **練習を重ねる**
   - 繰り返しプレイして操作感覚を身につけましょう

2. **落下パターンを覚える**
   - ブロック消去後の落下パターンを予測できるようになりましょう

3. **リプレイを意識する**
   - ゲームオーバー後、どこが悪かったか振り返りましょう

4. **高得点を目指す**
   - 自己ベストを更新することを目標にプレイしましょう
   - ランキング機能を活用して過去の記録を確認しましょう

5. **ランキング入りを目指す**
   - トップ10入りを目標に設定してモチベーションを維持しましょう
   - 1位を目指して何度も挑戦しましょう

---

## 📞 サポート

ゲームに関する質問や不具合の報告は、[GitHubリポジトリ](https://github.com/yaguma/square)のIssuesセクションまでお願いします。

---

**楽しいゲームライフを！ 🎮✨**
